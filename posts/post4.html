<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Law of Large Numbers Simulation - Statistics Homework</title>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="../css/custom.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-gradient-cyber">
  <div class="container">
    <a class="navbar-brand fw-bold" href="../index.html">
      <i class="bi bi-shield-lock-fill me-2"></i>Statistics Blog
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="../index.html"><i class="bi bi-house-fill me-1"></i>Home</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<header class="hero-section py-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        <p class="text-muted mb-2"><i class="bi bi-calendar3 me-1"></i>October 29, 2025</p>
        <h1 class="display-6 gradient-text mb-2">Law of Large Numbers Simulation</h1>
        <p class="lead mb-0">Visualization of the Law of Large Numbers through m repeated trajectories of n Bernoulli trials â€” Daniele De Pascali 1984462</p>
      </div>
    </div>
  </div>
</header>

<main class="container py-5">

<section class="mb-5">
  <h2 class="h4 mb-3">Concept</h2>
  <p>The Law of Large Numbers (LLN) states that the empirical frequency of success \( f(n) = \frac{\text{#successes}}{n} \) approaches the theoretical probability \( p \) as the number of trials \( n \) increases. Here we simulate \( m \) trajectories of \( n \) Bernoulli trials with success probability \( p \), and we visualize how their distributions converge.</p>
</section>

<section class="mb-5">
  <h2 class="h4 mb-3">Interactive Simulation</h2>
  <div class="row g-4 align-items-center mb-4">
    <div class="col-md-3">
      <label class="form-label fw-semibold">Probability of success (p)</label>
      <input type="number" id="pInput" class="form-control" step="0.01" min="0" max="1" value="0.5">
    </div>
    <div class="col-md-3">
      <label class="form-label fw-semibold">Number of trials (n)</label>
      <input type="number" id="nInput" class="form-control" value="200" min="10" max="2000">
    </div>
    <div class="col-md-3">
      <label class="form-label fw-semibold">Number of trajectories (m)</label>
      <input type="number" id="mInput" class="form-control" value="30" min="5" max="100">
    </div>
    <div class="col-md-3">
      <button id="simulateBtn" class="btn btn-dark w-100 mt-2">Simulate</button>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-lg-8">
      <div class="p-3 border rounded">
        <canvas id="trajectoriesChart" height="300"></canvas>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="p-3 border rounded">
        <canvas id="histChart" height="300"></canvas>
      </div>
    </div>
  </div>
  <p class="text-muted mt-3 small">Each line represents a trajectory of relative frequency \( f(n) \). The histogram shows the distribution of final \( f(n) \) values across all trajectories.</p>
</section>

</main>

<footer class="py-4">
  <div class="container">
    <p class="mb-0 text-muted">2025 Statistics Blog</p>
  </div>
</footer>

<script>
const ctxTraj=document.getElementById("trajectoriesChart"),ctxHist=document.getElementById("histChart");
let trajChart,histChart;
function bernoulli(p){return Math.random()<p?1:0}
function simulateLLN(p,n,m){
  const trajs=[];
  for(let j=0;j<m;j++){
    let sum=0;const arr=[];
    for(let i=1;i<=n;i++){sum+=bernoulli(p);arr.push(sum/i)}
    trajs.push(arr);
  }
  return trajs;
}
function updateCharts(){
  const p=parseFloat(document.getElementById("pInput").value);
  const n=parseInt(document.getElementById("nInput").value);
  const m=parseInt(document.getElementById("mInput").value);
  const trajs=simulateLLN(p,n,m);
  const labels=Array.from({length:n},(_,i)=>i+1);
  const datasets=trajs.map((arr,i)=>({
    data:arr,
    borderColor:`hsl(${i*360/m},70%,45%)`,
    borderWidth:1.2,
    pointRadius:0,
    fill:false,
    tension:0.15
  }));
  if(trajChart)trajChart.destroy();
  trajChart=new Chart(ctxTraj,{type:"line",data:{labels:labels,datasets:datasets},
    options:{animation:false,scales:{y:{title:{display:true,text:"Relative Frequency f(n)"},min:0,max:1},x:{title:{display:true,text:"n"}}},
    plugins:{legend:{display:false},annotation:{annotations:{pLine:{type:"line",yMin:p,yMax:p,borderColor:"#0f2027",borderWidth:2,borderDash:[5,5]}}}}}});
  const finals=trajs.map(t=>t[t.length-1]);
  const bins=20;
  const min=Math.min(...finals),max=Math.max(...finals);
  const step=(max-min)/bins;
  const freq=new Array(bins).fill(0);
  finals.forEach(v=>{
    let idx=Math.floor((v-min)/step);
    if(idx>=bins)idx=bins-1;
    freq[idx]++;
  });
  const centers=freq.map((_,i)=>min+step*(i+0.5));
  if(histChart)histChart.destroy();
  histChart=new Chart(ctxHist,{type:"bar",data:{labels:centers.map(x=>x.toFixed(2)),datasets:[{data:freq,backgroundColor:"#203a43"}]},
    options:{indexAxis:"y",animation:false,plugins:{legend:{display:false}},scales:{x:{title:{display:true,text:"Count"}},y:{title:{display:true,text:"f(n) bins"}}}}});
}
document.getElementById("simulateBtn").addEventListener("click",updateCharts);
updateCharts();
</script>

</body>
</html>
